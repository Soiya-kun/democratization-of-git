# 02 管理対象プロジェクト/ブランチポリシー

## 1. 対象プロジェクト

このアプリが扱えるプロジェクトは、以下の条件を満たすフォルダとする。

- Gitリポジトリである
- `main` ブランチが存在する

Git未初期化フォルダは「新たなプロジェクトを開始する」で初期化して `main` を作成する。

## 1.1 管理マーク (内部用)

このアプリは、プロジェクトを扱うための目印としてローカルGit設定に管理マークを設定する。

- `democratization-of-git.managed=true`
- `democratization-of-git.version=1`

## 2. ブランチ運用ポリシー (ユーザーには見せない)

- メイン(閲覧専用)ブランチ: 必ず `main`
- 作業(ワーク)ブランチ: `work-<作業名>` とする
  - `<作業名>` は半角英数字とハイフンのみ許可 (`^[A-Za-z0-9-]+$`)
  - 予約語: `main`, `master`, `work` などは作業名として不可
- 対象ブランチは `main` と `work-*` のみとし、それ以外は無視する
- `main` が存在しないリポジトリは、このアプリでは扱えない (例外としてエラー)

## 3. ワークは常に1つ

- 本アプリは原則として「ワークを複数作らない」
  - すでにワークが存在する場合は「新しい作業を開始する」を許可せず、完了/再開に誘導する
- 例外(外部操作など)で `work-*` が複数存在した場合:
  - 最終更新(コミット日時)が最新の `work-*` を自動採用して再開する

## 4. `user.name` / `user.email` の扱い

- 初回起動で入力した「名前/メール」は、このアプリで扱うプロジェクトにのみ適用する
- 適用方法: リポジトリのローカル設定へ書き込む (例: `git config --local user.name ...`)
- 優先順位:
  - すでにリポジトリに `user.name` / `user.email` が設定されている場合は維持する (上書きしない)
  - 未設定の場合のみ、アプリの初回設定で入力した値を設定する
